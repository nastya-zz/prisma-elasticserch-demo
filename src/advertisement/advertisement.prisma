model Advertisement {
  id          Int     @id @default(autoincrement())
  title       String
  description String
  images      String[]
  isNew       Boolean @default(false)
  //category todo field

  user   User @relation(fields: [userId], references: [id])
  userId Int

  isArchive  Boolean             @default(false)
  isActive   Boolean             @default(true)
  canCall    Boolean             @default(true)
  canMessage Boolean             @default(true)
  chats      AdvertisementChat[]

  views          Int
  uniqueWatchers Int[]

  coordinateX String
  coordinateY String
  address     String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  Message   Message? @relation(fields: [messageId], references: [id])
  messageId String?

  @@map("advertisement")
}

model AdvertisementMessage {
  id          String            @id @default(uuid())
  message     String
  user        User              @relation(fields: [usreId], references: [id])
  usreId      Int
  chat        AdvertisementChat @relation(fields: [chatId], references: [id])
  chatId      String
  readUserIds Int[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("advertisement_message")
}

model AdvertisementChat {
  id                   String                 @id @default(uuid())
  name                 String
  advertisement        Advertisement          @relation(fields: [advertisementId], references: [id])
  advertisementId      Int
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @default(now()) @updatedAt
  messages             Message[]
  AdvertisementMessage AdvertisementMessage[]
  User                 User?                  @relation(fields: [userId], references: [id])
  userId               Int?

  @@map("advertisement_chat")
}